 
{% extends 'hod_template/base_template.html' %}
{% block page_title %}
        Add Student   
{% endblock page_title %}
{% block main_content %}
{% load static %}
<section class="content">
    <div class="container-fluid">
        <div class="content-wrappe">
            <!-- Content Header (Page header) -->    
        
            <!-- Main content -->
            <section class="content">
              <div class="container-fluid">
                <div class="row">
                  <!-- left column -->
                  <div class="col-md-12">
                    <!-- general form elements -->
                    <div class="card card-primary">
                      <div class="card-header">
                        <h3 class="card-title">Add Students</h3>
                      </div>
                      {% url 'add_student_save' as action_path %}
                      {% include 'hod_template/form_template.html' with messages=messages forms=forms action_path=action_path button_text="Add Student" %}

                  </div>
                  <!--/.col (right) -->
                </div>
             
              
            </section>
            <!-- /.content -->
          </div>
    </div><!-- /.container-fluid -->
  </section>

  {% endblock main_content %}

  {% block customer_js %}
    <script>
      $(document).ready(function() {
        $("#id_email").keyup(function() {
          var email = $(this).val();
      
          $.ajax({
            url: "{% url 'check_email_exist' %}",
            type: "POST",
            data: { email: email }
          })
          .done(function(response) {
            console.log(response);
            if (response === "True") {   
              $(".email_error").remove();
              $("<span class='email_error' style='padding: 5px;color: red;font-weight: bold;'>Email available</span>").insertAfter("#id_email");
            } else {
              $(".email_error").remove();
              $("<span class='email_error' style='padding: 5px;color: green;font-weight: bold;'>Email not available</span>").insertAfter("#id_email");
            }
          })
          .fail(function() {
            console.log("Failed");
          });
        });
      
        $("#id_username").keyup(function() {
          var username = $(this).val();
      
          $.ajax({
            url: "{% url 'check_username_exist' %}",
            type: "POST",
            data: { username: username }
          })
          .done(function(response) {
            console.log(response);
            if (response === "True") {   
              $(".username_error").remove();
              $("<span class='username_error' style='padding: 5px;color: red;font-weight: bold;'>Username available</span>").insertAfter("#id_username");
            } else {
              $(".username_error").remove();
              $("<span class='username_error' style='padding: 5px;color: green;font-weight: bold;'>Username not available</span>").insertAfter("#id_username");
            }
          })
          .fail(function() {
            console.log("Failed");
          });
        });
      });
      
    </script>
  {% endblock customer_js %}